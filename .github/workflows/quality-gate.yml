name: Quality gate

on:
  label:
    types: [created, deleted]

jobs:
  validate-demo-file-change:
    name: Check that demo file uploaded
    runs-on: ubuntu-latest
    outputs:
      changed_files: ${{ steps.valid-changes.outputs.changed_files }}
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Set changes output
        id: valid-changes
        if: steps.changed-files.outputs.any_changed == 'true'
        run: |
          echo "changed_files are ${{ steps.changed-files.outputs.all_changed_files }}"
          echo "changed_files=${{ steps.changed-files.outputs.all_changed_files }}" >> $GITHUB_OUTPUT
          echo "continue_flow=true" >> $GITHUB_OUTPUT

